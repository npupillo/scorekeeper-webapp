"use strict";var trace=function(){for(var a=0;a<arguments.length;a++)console.log(arguments[a])},router=function(a){a.host="http://scorekeeper-api.herokuapp.com";var b=Backbone.Router.extend({routes:{"":"allGames",game:"showGame",newgame:"newGame",players:"allPlayers"},allGames:function(){c(),$("#content1").load("partials/allGames.html"),allGames.init()},showGame:function(a){c(),$("#content1").load("partials/showGame.html"),showGame.init(a)},newGame:function(){$("#content1").load("partials/newGame.html"),newGame.init()},allPlayers:function(){c(),$("#content1").load("partials/allPlayers.html"),allPlayers.init()}}),c=function(){$("#content1").empty(),$("#content2").empty(),$("#content3").empty()};return a.router=new b,a.backbone=function(){Backbone.history.start()},a}(router||{});$(document).ready(function(){router.backbone()}),Handlebars.registerHelper("handlebar_helper",function(){return"This is the output of your helper method."}),Handlebars.registerHelper("multiply",function(a,b){return a*b}),Handlebars.registerHelper("add_nums",function(a,b){for(var c=0,d=0;d<a.length;d++)c+=b.fn(a[d]);return c}),Handlebars.registerHelper("grouped_each",function(a,b,c){var d,e="",f=[];if(b&&b.length>0){for(d=0;d<b.length;d++)d>0&&d%a===0&&(e+=c.fn(f),f=[]),f.push(b[d]);e+=c.fn(f)}return e}),Handlebars.registerHelper("sum",function(){for(var a,b=0,c=0;c<arguments.length;c++)a=parseFloat(arguments[c]),isNaN(a)||(b+=a);return b});var showGame=function(a){var b=function(a){var b=a.players;b.forEach(function(b){b.scores.forEach(function(b,c,d){b.game_id!==a.id&&d.splice(c,1)})}),c(a),d(a)},c=function(a){var b=Handlebars.compile($("#one_game_template").html());$("#content1").html(b({game:a}))},d=function(a){var b=a.players,c=[];b.forEach(function(a){c.push(a.username);var b=(a.scores,0);a.scores.forEach(function(a,c,d){b+=a.points}),c.push(b)}),e(c)},e=function(a){console.log(a),$("#chart_container").highcharts({chart:{type:"column"},title:{text:"Game Scores"},xAxis:{title:{text:"Players"}},yAxis:{title:{text:"Score Totals"}},plotOptions:{series:{dataLabels:{enabled:!0}}},series:[{name:"Game Scores",colorByPoint:!0,data:a}]})};return a.init=function(a){console.log("inside showGame.init , the game id is: "+a),$.ajax({url:router.host+"/games/"+a,type:"GET",dataType:"JSON"}).done(function(a){console.log(a),b(a)}).fail(function(a,b,c){console.log(a,b,c)})},a}(showGame||{}),allPlayers=function(a){var b=function(a){var b=Handlebars.compile($("#all_players_template").html());$("#content2").html(b({players:a}))};return a.init=function(){$.ajax({url:router.host+"/players",type:"GET",dataType:"JSON"}).done(function(a){console.log(a),b(a)}).fail(function(a,b,c){console.log(a,b,c)})},a}(allPlayers||{}),allGames=function(a){var b=function(a){var b=Handlebars.compile($("#all_games_template").html());$("#content1").html(b({games:a}))},c=function(){$.ajax({url:router.host+"/games",type:"GET",dataType:"JSON"}).done(function(a){b(a)}).fail(function(a,b,c){console.log(a,b,c)})};return a.init=function(){c()},a}(allGames||{}),newGame=function(a){var b=function(a){var b=Handlebars.compile($("#new_game_template").html());$("#content2").html(b({players:a})),$("form#submit-new-game").on("click",function(a){a.preventDefault(),c(a),alert("CLICKED")})},c=function(a){$.ajax({url:router.host+"/games",type:"POST",dataType:"JSON",data:{game:{name:$("input#new-game-name").val(),status:"active",start_date:"Apr 1 2015"}}}).done(function(a){console.log(a)}).fail(function(a,b,c){console.log(a,b,c)})},d=function(){$.ajax({url:router.host+"/players",type:"GET",dataType:"JSON"}).done(function(a){console.log(a),b(a)}).fail(function(a,b,c){console.log(a,b,c)})};return a.init=function(){d()},a}(newGame||{});